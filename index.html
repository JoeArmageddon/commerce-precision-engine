<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Commerce Precision Engine - Deployment Guide</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 40px 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .content {
            padding: 40px;
        }
        
        .section {
            margin-bottom: 40px;
        }
        
        .section h2 {
            color: #1e3a8a;
            font-size: 1.8em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #e5e7eb;
        }
        
        .section h3 {
            color: #2563eb;
            font-size: 1.3em;
            margin: 25px 0 15px 0;
        }
        
        .step {
            background: #f8fafc;
            border-left: 4px solid #3b82f6;
            padding: 20px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .step-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: #3b82f6;
            color: white;
            border-radius: 50%;
            font-weight: bold;
            margin-right: 10px;
        }
        
        .step-title {
            font-weight: 600;
            color: #1e3a8a;
            font-size: 1.1em;
        }
        
        .step-content {
            margin-top: 10px;
            margin-left: 40px;
        }
        
        code {
            background: #1e293b;
            color: #e2e8f0;
            padding: 2px 8px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        .code-block {
            background: #1e293b;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.5;
        }
        
        .warning {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .warning strong {
            color: #92400e;
        }
        
        .info {
            background: #dbeafe;
            border-left: 4px solid #3b82f6;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .info strong {
            color: #1e40af;
        }
        
        .success {
            background: #d1fae5;
            border-left: 4px solid #10b981;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .success strong {
            color: #065f46;
        }
        
        ul, ol {
            margin: 10px 0 10px 20px;
        }
        
        li {
            margin: 8px 0;
        }
        
        a {
            color: #2563eb;
            text-decoration: none;
        }
        
        a:hover {
            text-decoration: underline;
        }
        
        .checklist {
            list-style: none;
            margin-left: 0;
        }
        
        .checklist li {
            padding-left: 30px;
            position: relative;
        }
        
        .checklist li:before {
            content: "‚òê";
            position: absolute;
            left: 0;
            color: #3b82f6;
            font-size: 1.2em;
        }
        
        .footer {
            background: #f8fafc;
            padding: 30px 40px;
            text-align: center;
            border-top: 1px solid #e5e7eb;
        }
        
        .platform-badge {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9em;
            margin: 5px;
        }
        
        .railway {
            background: #0b0f19;
            color: white;
        }
        
        .vercel {
            background: #000;
            color: white;
        }
        
        .supabase {
            background: #3ecf8e;
            color: #0f2e1d;
        }
        
        .openai {
            background: #10a37f;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéì Commerce Precision Engine</h1>
            <p>Complete Step-by-Step Deployment Guide</p>
        </div>
        
        <div class="content">
            <!-- OVERVIEW -->
            <div class="section">
                <h2>üìã What You're Building</h2>
                <p>A full-stack AI-powered CBSE Class 12 Commerce answer engine with:</p>
                <ul style="margin: 15px 0 15px 30px;">
                    <li><strong>Backend:</strong> FastAPI + PostgreSQL + 4-Layer AI Verification Pipeline</li>
                    <li><strong>Frontend:</strong> React + TypeScript + Tailwind CSS</li>
                    <li><strong>AI:</strong> OpenAI GPT-4 or Google Gemini integration</li>
                    <li><strong>Database:</strong> Supabase PostgreSQL</li>
                </ul>
                
                <div style="margin-top: 20px;">
                    <span class="platform-badge railway">üöÑ Railway</span>
                    <span class="platform-badge vercel">‚ñ≤ Vercel</span>
                    <span class="platform-badge supabase">‚ö° Supabase</span>
                    <span class="platform-badge openai">ü§ñ Gemini/Groq</span>
                </div>
            </div>
            
            <!-- PREREQUISITES -->
            <div class="section">
                <h2>üîß Prerequisites (Get These First!)</h2>
                <p>Before you start, you need accounts on these platforms:</p>
                
                <div class="step">
                    <span class="step-number">1</span>
                    <span class="step-title">GitHub Account</span>
                    <div class="step-content">
                        You need this to store your code.<br>
                        üëâ <a href="https://github.com/signup" target="_blank">Create GitHub Account</a>
                    </div>
                </div>
                
                <div class="step">
                    <span class="step-number">2</span>
                    <span class="step-title">Supabase Account (Free Database)</span>
                    <div class="step-content">
                        This will host your PostgreSQL database.<br>
                        üëâ <a href="https://supabase.com/signup" target="_blank">Create Supabase Account</a>
                    </div>
                </div>
                
                <div class="step">
                    <span class="step-number">3</span>
                    <span class="step-title">Railway Account (Free Backend Hosting)</span>
                    <div class="step-content">
                        This will host your Python backend.<br>
                        üëâ <a href="https://railway.app/" target="_blank">Create Railway Account</a><br>
                        <em>Sign up with your GitHub account for easiest setup.</em>
                    </div>
                </div>
                
                <div class="step">
                    <span class="step-number">4</span>
                    <span class="step-title">Vercel Account (Free Frontend Hosting)</span>
                    <div class="step-content">
                        This will host your React frontend.<br>
                        üëâ <a href="https://vercel.com/signup" target="_blank">Create Vercel Account</a><br>
                        <em>Sign up with your GitHub account for easiest setup.</em>
                    </div>
                </div>
                
                <div class="step">
                    <span class="step-number">5</span>
                    <span class="step-title">OpenAI API Key (or Google Gemini)</span>
                    <div class="step-content">
                        This powers the AI answers.<br>
                        üëâ <a href="https://platform.openai.com/api-keys" target="_blank">Get OpenAI API Key</a> (need to add ~$5 credit)<br>
                        OR<br>
                        üëâ <a href="https://aistudio.google.com/app/apikey" target="_blank">Get Gemini API Key</a> (free tier available)
                    </div>
                </div>
            </div>
            
            <!-- STEP 1 -->
            <div class="section">
                <h2>Step 1: Upload Code to GitHub</h2>
                
                <div class="step">
                    <span class="step-number">1</span>
                    <span class="step-title">Create a New Repository</span>
                    <div class="step-content">
                        Go to <a href="https://github.com/new" target="_blank">github.com/new</a><br>
                        Name it: <code>commerce-precision-engine</code><br>
                        Make it: <strong>Public</strong><br>
                        Click: <strong>Create repository</strong>
                    </div>
                </div>
                
                <div class="step">
                    <span class="step-number">2</span>
                    <span class="step-title">Upload Your Files</span>
                    <div class="step-content">
                        On your new repo page, click: <strong>"uploading an existing file"</strong><br><br>
                        
                        <strong>Upload these folders/files:</strong>
                        <ul>
                            <li><code>backend/</code> folder (with all contents)</li>
                            <li><code>frontend/</code> folder (with all contents)</li>
                            <li><code>scripts/</code> folder</li>
                            <li><code>README.md</code></li>
                            <li><code>.gitignore</code></li>
                        </ul>
                        
                        Don't upload any <code>.env</code> files!<br><br>
                        Scroll down and click: <strong>"Commit changes"</strong>
                    </div>
                </div>
                
                <div class="success">
                    <strong>‚úÖ Check:</strong> You should now see all your code on GitHub at 
                    <code>github.com/YOUR_USERNAME/commerce-precision-engine</code>
                </div>
            </div>
            
            <!-- STEP 2 -->
            <div class="section">
                <h2>Step 2: Setup Supabase Database</h2>
                
                <div class="step">
                    <span class="step-number">1</span>
                    <span class="step-title">Create a New Project</span>
                    <div class="step-content">
                        Login to <a href="https://supabase.com" target="_blank">Supabase</a><br>
                        Click: <strong>New Project</strong><br>
                        Organization: Select or create one<br>
                        Project name: <code>commerce-engine-db</code><br>
                        Database Password: <strong>CREATE A STRONG PASSWORD</strong> (save this!)<br>
                        Region: Choose closest to your users (e.g., US East)<br>
                        Click: <strong>Create new project</strong>
                    </div>
                </div>
                
                <div class="step">
                    <span class="step-number">2</span>
                    <span class="step-title">Get Your Database Connection String</span>
                    <div class="step-content">
                        Wait for project to finish setting up (1-2 minutes)<br><br>
                        
                        Click on: <strong>Connect</strong> (top right)<br>
                        Select: <strong>Prisma</strong> tab<br>
                        Copy the <strong>Connection String</strong> (it looks like this):
                        <div class="code-block">postgresql://postgres:[YOUR-PASSWORD]@db.xxxxxxxxxx.supabase.co:5432/postgres</div>
                        
                        <strong>‚ö†Ô∏è Important:</strong> Replace <code>[YOUR-PASSWORD]</code> with the password you created.<br>
                        Save this connection string somewhere safe!
                    </div>
                </div>
                
                <div class="step">
                    <span class="step-number">3</span>
                    <span class="step-title">Enable pgvector Extension</span>
                    <div class="step-content">
                        In your Supabase project sidebar:<br>
                        Click: <strong>Database</strong> ‚Üí <strong>Extensions</strong><br>
                        Search: <code>pgvector</code><br>
                        Toggle it <strong>ON</strong>
                    </div>
                </div>
            </div>
            
            <!-- STEP 3 -->
            <div class="section">
                <h2>Step 3: Deploy Backend to Railway</h2>
                
                <div class="step">
                    <span class="step-number">1</span>
                    <span class="step-title">Create New Project</span>
                    <div class="step-content">
                        Login to <a href="https://railway.app" target="_blank">Railway</a><br>
                        Click: <strong>New Project</strong><br>
                        Select: <strong>Deploy from GitHub repo</strong><br>
                        Choose: <code>commerce-precision-engine</code><br><br>
                        
                        If you don't see your repo:<br>
                        Click: <strong>"Configure GitHub App"</strong> and give Railway access to your repo.
                    </div>
                </div>
                
                <div class="step">
                    <span class="step-number">2</span>
                    <span class="step-title">Add Environment Variables</span>
                    <div class="step-content">
                        Click on your service (the one with the GitHub icon)<br>
                        Go to: <strong>Variables</strong> tab<br>
                        Click: <strong>New Variable</strong> (add each one):
                        
                        <table style="width: 100%; margin-top: 15px; border-collapse: collapse;">
                            <tr style="background: #f1f5f9;">
                                <th style="padding: 10px; text-align: left; border: 1px solid #e2e8f0;">Variable Name</th>
                                <th style="padding: 10px; text-align: left; border: 1px solid #e2e8f0;">Value</th>
                            </tr>
                            <tr>
                                <td style="padding: 10px; border: 1px solid #e2e8f0;"><code>DATABASE_URL</code></td>
                                <td style="padding: 10px; border: 1px solid #e2e8f0;">Your Supabase connection string (add <code>+asyncpg</code> after postgresql)<br>Example: <code>postgresql+asyncpg://postgres:pass@db...supabase.co:5432/postgres</code></td>
                            </tr>
                            <tr>
                                <td style="padding: 10px; border: 1px solid #e2e8f0;"><code>SECRET_KEY</code></td>
                                <td style="padding: 10px; border: 1px solid #e2e8f0;">Random 32+ character string. Generate at <a href="https://randomkeygen.com/" target="_blank">randomkeygen.com</a> (CodeIgniter Encryption Keys)</td>
                            </tr>
                            <tr>
                                <td style="padding: 10px; border: 1px solid #e2e8f0;"><code>GEMINI_API_KEY</code></td>
                                <td style="padding: 10px; border: 1px solid #e2e8f0;">Your Gemini API key (from Google AI Studio)</td>
                            </tr>
                            <tr>
                                <td style="padding: 10px; border: 1px solid #e2e8f0;"><code>GROQ_API_KEY</code></td>
                                <td style="padding: 10px; border: 1px solid #e2e8f0;">Your Groq API key (starts with <code>gsk_</code>)</td>
                            </tr>
                            <tr>
                                <td style="padding: 10px; border: 1px solid #e2e8f0;"><code>FRONTEND_URL</code></td>
                                <td style="padding: 10px; border: 1px solid #e2e8f0;">For now: <code>*</code> (we'll update this later)</td>
                            </tr>
                        </table>
                        
                        <div class="info" style="margin-top: 15px;">
                            <strong>üí° Tip:</strong> You can add just Gemini, just Groq, or both. If both are provided, Gemini is used first and Groq is the fallback.
                        </div>
                    </div>
                </div>
                
                <div class="step">
                    <span class="step-number">3</span>
                    <span class="step-title">Set Build Command</span>
                    <div class="step-content">
                        In your service settings:<br>
                        Go to: <strong>Settings</strong> tab<br>
                        Find: <strong>Build Command</strong><br>
                        Set it to: <code>cd backend && pip install -r requirements.txt && prisma generate</code><br><br>
                        
                        Find: <strong>Start Command</strong><br>
                        Set it to: <code>cd backend && prisma db push && uvicorn src.main:app --host 0.0.0.0 --port $PORT</code>
                    </div>
                </div>
                
                <div class="step">
                    <span class="step-number">4</span>
                    <span class="step-title">Deploy!</span>
                    <div class="step-content">
                        Railway will automatically deploy when you add variables.<br><br>
                        
                        Wait for deployment to finish (2-3 minutes).<br>
                        You'll see a green checkmark when it's done.<br><br>
                        
                        Click: <strong>Deployments</strong> tab to see progress.<br>
                        Click on the deployment to see logs.
                    </div>
                </div>
                
                <div class="step">
                    <span class="step-number">5</span>
                    <span class="step-title">Get Your Backend URL</span>
                    <div class="step-content">
                        Once deployed, click on the URL shown at the top.<br>
                        It looks like: <code>https://commerce-precision-engine-production.up.railway.app</code><br><br>
                        
                        <strong>Test it:</strong> Open the URL in your browser.<br>
                        You should see: <code>{"name": "Commerce Precision Engine v2.0"}</code><br><br>
                        
                        <strong>Copy and save this URL!</strong> You need it for the frontend.
                    </div>
                </div>
                
                <div class="step">
                    <span class="step-number">6</span>
                    <span class="step-title">Seed the Database (Optional but Recommended)</span>
                    <div class="step-content">
                        To add CBSE subjects and chapters:<br>
                        Go to: <code>https://YOUR_BACKEND_URL/docs</code><br><br>
                        
                        Click: <strong>POST /api/v1/subjects/seed</strong><br>
                        Click: <strong>Try it out</strong><br>
                        Click: <strong>Execute</strong><br><br>
                        
                        You should see: <code>{"message": "Database seeded successfully"}</code>
                    </div>
                </div>
            </div>
            
            <!-- STEP 4 -->
            <div class="section">
                <h2>Step 4: Deploy Frontend to Vercel</h2>
                
                <div class="step">
                    <span class="step-number">1</span>
                    <span class="step-title">Import Project</span>
                    <div class="step-content">
                        Login to <a href="https://vercel.com" target="_blank">Vercel</a><br>
                        Click: <strong>Add New...</strong> ‚Üí <strong>Project</strong><br>
                        Find: <code>commerce-precision-engine</code> and click <strong>Import</strong>
                    </div>
                </div>
                
                <div class="step">
                    <span class="step-number">2</span>
                    <span class="step-title">Configure Project</span>
                    <div class="step-content">
                        Framework Preset: <strong>Vite</strong> (should auto-detect)<br>
                        Root Directory: Click <strong>Edit</strong> and set to: <code>frontend</code><br><br>
                        
                        Build and Output Settings:<br>
                        - Build Command: <code>npm run build</code> (default)<br>
                        - Output Directory: <code>dist</code> (default)<br><br>
                        
                        Click: <strong>Environment Variables</strong><br>
                        Add:
                        <table style="width: 100%; margin-top: 15px; border-collapse: collapse;">
                            <tr style="background: #f1f5f9;">
                                <th style="padding: 10px; text-align: left; border: 1px solid #e2e8f0;">Name</th>
                                <th style="padding: 10px; text-align: left; border: 1px solid #e2e8f0;">Value</th>
                            </tr>
                            <tr>
                                <td style="padding: 10px; border: 1px solid #e2e8f0;"><code>VITE_API_URL</code></td>
                                <td style="padding: 10px; border: 1px solid #e2e8f0;">Your Railway backend URL (e.g., <code>https://your-app.up.railway.app</code>)</td>
                            </tr>
                        </table>
                    </div>
                </div>
                
                <div class="step">
                    <span class="step-number">3</span>
                    <span class="step-title">Deploy!</span>
                    <div class="step-content">
                        Click: <strong>Deploy</strong><br><br>
                        
                        Wait for deployment (1-2 minutes).<br>
                        You'll get a URL like: <code>https://commerce-precision-engine.vercel.app</code>
                    </div>
                </div>
                
                <div class="step">
                    <span class="step-number">4</span>
                    <span class="step-title">Update Backend CORS</span>
                    <div class="step-content">
                        Now you need to tell your backend to accept requests from your frontend.<br><br>
                        
                        Go back to Railway:<br>
                        Find: <code>FRONTEND_URL</code> variable<br>
                        Change it from <code>*</code> to your Vercel URL<br>
                        Example: <code>https://commerce-precision-engine.vercel.app</code><br><br>
                        
                        Railway will automatically redeploy.
                    </div>
                </div>
            </div>
            
            <!-- STEP 5 -->
            <div class="section">
                <h2>Step 5: Test Your App</h2>
                
                <div class="info">
                    <strong>üéâ You're done!</strong> Open your Vercel URL and try:
                </div>
                
                <ol style="margin-left: 30px;">
                    <li>Login with any access code (e.g., <code>student123</code>)</li>
                    <li>Click on a Subject (Accountancy, Economics, or Business Studies)</li>
                    <li>Select a Chapter</li>
                    <li>Ask a question like: <em>"What is partnership accounting?"</em></li>
                    <li>Wait 1-2 minutes for the 4-layer AI processing</li>
                    <li>View your answer with verification logs!</li>
                </ol>
            </div>
            
            <!-- TROUBLESHOOTING -->
            <div class="section">
                <h2>üêõ Common Issues & Fixes</h2>
                
                <div class="warning">
                    <strong>Issue:</strong> "Database connection failed"<br>
                    <strong>Fix:</strong> Check your DATABASE_URL. Make sure it has <code>+asyncpg</code> and the correct password.
                </div>
                
                <div class="warning">
                    <strong>Issue:</strong> "CORS error" in browser console<br>
                    <strong>Fix:</strong> Update FRONTEND_URL in Railway to match your exact Vercel URL (including https://)
                </div>
                
                <div class="warning">
                    <strong>Issue:</strong> "API key invalid"<br>
                    <strong>Fix:</strong> Check your OpenAI/Gemini API key. For OpenAI, you may need to add billing.
                </div>
                
                <div class="warning">
                    <strong>Issue:</strong> Frontend shows "Failed to fetch"<br>
                    <strong>Fix:</strong> Make sure VITE_API_URL in Vercel is correct and doesn't have a trailing slash.
                </div>
            </div>
            
            <!-- CHECKLIST -->
            <div class="section">
                <h2>‚úÖ Final Checklist</h2>
                <ul class="checklist">
                    <li>GitHub repository created with all code</li>
                    <li>Supabase project created and pgvector enabled</li>
                    <li>DATABASE_URL added to Railway</li>
                    <li>SECRET_KEY generated and added</li>
                    <li>OPENAI_API_KEY or GEMINI_API_KEY added</li>
                    <li>Backend deployed and working on Railway</li>
                    <li>Database seeded with CBSE subjects</li>
                    <li>Frontend deployed on Vercel</li>
                    <li>VITE_API_URL set to backend URL</li>
                    <li>FRONTEND_URL updated in Railway</li>
                    <li>Successfully logged in and asked a question</li>
                </ul>
            </div>
            
            <!-- COSTS -->
            <div class="section">
                <h2>üí∞ Expected Costs</h2>
                <table style="width: 100%; border-collapse: collapse; margin-top: 15px;">
                    <tr style="background: #f1f5f9;">
                        <th style="padding: 12px; text-align: left; border: 1px solid #e2e8f0;">Service</th>
                        <th style="padding: 12px; text-align: left; border: 1px solid #e2e8f0;">Free Tier</th>
                        <th style="padding: 12px; text-align: left; border: 1px solid #e2e8f0;">Notes</th>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border: 1px solid #e2e8f0;">GitHub</td>
                        <td style="padding: 12px; border: 1px solid #e2e8f0;">‚úÖ Unlimited</td>
                        <td style="padding: 12px; border: 1px solid #e2e8f0;">Free for public repos</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border: 1px solid #e2e8f0;">Supabase</td>
                        <td style="padding: 12px; border: 1px solid #e2e8f0;">‚úÖ 500MB</td>
                        <td style="padding: 12px; border: 1px solid #e2e8f0;">Pauses after 7 days inactivity</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border: 1px solid #e2e8f0;">Railway</td>
                        <td style="padding: 12px; border: 1px solid #e2e8f0;">‚úÖ $5 credit</td>
                        <td style="padding: 12px; border: 1px solid #e2e8f0;">Good for ~1 month of usage</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border: 1px solid #e2e8f0;">Vercel</td>
                        <td style="padding: 12px; border: 1px solid #e2e8f0;">‚úÖ Unlimited hobby</td>
                        <td style="padding: 12px; border: 1px solid #e2e8f0;">Function limits apply</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border: 1px solid #e2e8f0;">Gemini</td>
                        <td style="padding: 12px; border: 1px solid #e2e8f0;">‚úÖ 60 req/min</td>
                        <td style="padding: 12px; border: 1px solid #e2e8f0;">Free tier available</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border: 1px solid #e2e8f0;">Gemini</td>
                        <td style="padding: 12px; border: 1px solid #e2e8f0;">‚úÖ 60 req/min</td>
                        <td style="padding: 12px; border: 1px solid #e2e8f0;">Free tier available</td>
                    </tr>
                </table>
            </div>
        </div>
        
        <div class="footer">
            <p><strong>Need Help?</strong></p>
            <p style="margin-top: 10px; color: #64748b;">
                Check the <code>README.md</code> in your GitHub repository for more details.<br>
                This guide was generated for Commerce Precision Engine v2.0
            </p>
        </div>
    </div>
</body>
</html>
